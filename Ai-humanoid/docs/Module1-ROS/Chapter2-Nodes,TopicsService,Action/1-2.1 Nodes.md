---
id: 1-2.1-Nodes
title: 2.1 - ROS 2 Nodes
sidebar_label: 2.1 Nodes
sidebar_position: 1
---

# 2.1 ROS 2 Nodes: The Computational Units

## Learning Objectives
- Understand the role and lifecycle of a ROS 2 node.
- Differentiate between `rclpy.init()`, `rclpy.create_node()`, `rclpy.spin()`, and `rclpy.shutdown()`.
- Implement a basic `rclpy` node in Python.
- Understand how to declare and use node parameters.

## Key Concepts
- **ROS 2 Node**: An executable process that performs computation within the ROS 2 system
- **`rclpy.init()`**: Initializes the ROS 2 client library
- **`rclpy.create_node()`**: Creates a new ROS 2 node instance
- **`rclpy.spin()`**: Keeps the node alive and processes callbacks
- **`rclpy.shutdown()`**: Shuts down the ROS 2 client library
- **Node Lifecycle**: The sequence of states a node goes through during its existence
- **Node Parameters**: Configurable values that can be set at runtime

This section details the fundamental nature of ROS 2 nodes as independent executables. It explains the Python `rclpy` API calls for node initialization, creation, running (spinning), and shutdown. Emphasis is placed on the node lifecycle and robust error handling (e.g., `KeyboardInterrupt`). The concept of node parameters is introduced with examples of how to declare, set, and retrieve them, highlighting their utility for configurable nodes.

<!-- DIAGRAM: Simplified representation of a single ROS 2 node within the ROS 2 graph -->

## Basic Node Implementation

```python
import rclpy
from rclpy.node import Node

class MinimalNode(Node):
    def __init__(self):
        super().__init__('minimal_node')
        self.get_logger().info('Minimal Node initialized.')

def main(args=None):
    rclpy.init(args=args)
    node = MinimalNode()
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        node.get_logger().info('Minimal Node shutting down.')
    finally:
        node.destroy_node()
        rclpy.shutdown()

if __name__ == '__main__':
    main()
```

## Node Parameters

```python
import rclpy
from rclpy.node import Node
from rcl_interfaces.msg import ParameterDescriptor

class ParameterNode(Node):
    def __init__(self):
        super().__init__('parameter_node')

        # Declare a parameter with a default value and description
        my_parameter_descriptor = ParameterDescriptor(description='This is my custom parameter.')
        self.declare_parameter('my_parameter', 'default_value', my_parameter_descriptor)

        # Get the parameter value
        param_value = self.get_parameter('my_parameter').get_parameter_value().string_value
        self.get_logger().info(f'My parameter value is: {param_value}')

        # Optionally, set a parameter dynamically (demonstrates capability)
        self.set_parameters([rclpy.Parameter('my_parameter', rclpy.Parameter.Type.STRING, 'new_value')])
        new_param_value = self.get_parameter('my_parameter').get_parameter_value().string_value
        self.get_logger().info(f'My parameter value updated to: {new_param_value}')

def main(args=None):
    rclpy.init(args=args)
    node = ParameterNode()
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        pass
    finally:
        node.destroy_node()
        rclpy.shutdown()

if __name__ == '__main__':
    main()
```