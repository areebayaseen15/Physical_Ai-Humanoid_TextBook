"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[2418],{8453:(e,r,s)=>{s.d(r,{R:()=>t,x:()=>l});var n=s(6540);const i={},o=n.createContext(i);function t(e){const r=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),n.createElement(o.Provider,{value:r},e.children)}},9934:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>t,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"Module1-ROS/Chapter2-Nodes,TopicsService,Action/1-2-2-Topics","title":"2.2 - Topics","description":"---","source":"@site/docs/Module1-ROS/Chapter2-Nodes,TopicsService,Action/1-2.2 Topics.md","sourceDirName":"Module1-ROS/Chapter2-Nodes,TopicsService,Action","slug":"/Module1-ROS/Chapter2-Nodes,TopicsService,Action/1-2-2-Topics","permalink":"/docs/Module1-ROS/Chapter2-Nodes,TopicsService,Action/1-2-2-Topics","draft":false,"unlisted":false,"editUrl":"https://github.com/areebayaseen15/Ai-Humanoid-textbook/edit/main/docs/Module1-ROS/Chapter2-Nodes,TopicsService,Action/1-2.2 Topics.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"1-2-2-Topics","sidebar_position":2,"title":"2.2 - Topics"},"sidebar":"tutorialSidebar","previous":{"title":"2.1 Nodes","permalink":"/docs/Module1-ROS/Chapter2-Nodes,TopicsService,Action/1-2.1-Nodes"},"next":{"title":"2.3 - Services","permalink":"/docs/Module1-ROS/Chapter2-Nodes,TopicsService,Action/1-2-3-Services"}}');var i=s(4848),o=s(8453);const t={id:"1-2-2-Topics",sidebar_position:2,title:"2.2 - Topics"},l=void 0,c={},a=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Basic Publisher Implementation",id:"basic-publisher-implementation",level:2},{value:"Basic Subscriber Implementation",id:"basic-subscriber-implementation",level:2},{value:"Custom Message Implementation",id:"custom-message-implementation",level:2},{value:"Quality of Service (QoS) Implementation",id:"quality-of-service-qos-implementation",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h1,{id:"22-topics-asynchronous-data-streaming-publishsubscribe",children:"2.2 Topics: Asynchronous Data Streaming (Publish/Subscribe)"}),"\n",(0,i.jsx)(r.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Explain the asynchronous publish/subscribe communication model in detail."}),"\n",(0,i.jsxs)(r.li,{children:["Implement ROS 2 publishers and subscribers in Python using ",(0,i.jsx)(r.code,{children:"rclpy"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["Understand and utilize standard ROS 2 message types (e.g., ",(0,i.jsx)(r.code,{children:"std_msgs"}),")."]}),"\n",(0,i.jsx)(r.li,{children:"Learn to define and use custom ROS IDL message types."}),"\n",(0,i.jsx)(r.li,{children:"Grasp the significance and application of Quality of Service (QoS) profiles."}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"ROS 2 Topics"}),": Named buses for passing messages between nodes"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Publisher"}),": Node that sends messages to a topic"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Subscriber"}),": Node that receives messages from a topic"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Publish/Subscribe Pattern"}),": Asynchronous communication model"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Message Types"}),": Standardized data structures for communication"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Quality of Service (QoS)"}),": Policies that define how messages are delivered"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["This section comprehensively covers topics. It explains the publisher/subscriber roles, how to use ",(0,i.jsx)(r.code,{children:"rclpy"})," to create them, and the importance of message types. Detail standard message types (",(0,i.jsx)(r.code,{children:"std_msgs"}),") and guide students through creating custom ",(0,i.jsx)(r.code,{children:".msg"})," files using ROS IDL, building them with ",(0,i.jsx)(r.code,{children:"colcon"}),", and using them in Python. A significant portion is dedicated to QoS profiles, explaining reliability, durability, history, and depth policies with practical examples of their impact on communication."]}),"\n",(0,i.jsx)(r.h2,{id:"basic-publisher-implementation",children:"Basic Publisher Implementation"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_publisher')\r\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Hello ROS 2: {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\r\n        self.i += 1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    minimal_publisher = MinimalPublisher()\r\n    rclpy.spin(minimal_publisher)\r\n    minimal_publisher.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(r.h2,{id:"basic-subscriber-implementation",children:"Basic Subscriber Implementation"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_subscriber')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'topic',\r\n            self.listener_callback,\r\n            10) # QoS depth\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    minimal_subscriber = MinimalSubscriber()\r\n    rclpy.spin(minimal_subscriber)\r\n    minimal_subscriber.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(r.h2,{id:"custom-message-implementation",children:"Custom Message Implementation"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# In my_robot_controller/msg/RobotPose.msg\r\n# float32 x\r\n# float32 y\r\n# float32 theta\r\n\r\n# Python publisher using custom message (assuming message built and sourced)\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom my_robot_controller.msg import RobotPose # Import custom message\r\nimport time\r\n\r\nclass CustomPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('custom_publisher')\r\n        self.publisher_ = self.create_publisher(RobotPose, 'robot_pose', 10)\r\n        timer_period = 1.0\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.x, self.y, self.theta = 0.0, 0.0, 0.0\r\n\r\n    def timer_callback(self):\r\n        msg = RobotPose()\r\n        msg.x = self.x\r\n        msg.y = self.y\r\n        msg.theta = self.theta\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing Pose: x={msg.x:.2f}, y={msg.y:.2f}, theta={msg.theta:.2f}')\r\n        self.x += 0.1\r\n        self.y += 0.05\r\n        self.theta += 0.01\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = CustomPublisher()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n\r\n# Python subscriber using custom message\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom my_robot_controller.msg import RobotPose # Import custom message\r\n\r\nclass CustomSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('custom_subscriber')\r\n        self.subscription = self.create_subscription(\r\n            RobotPose,\r\n            'robot_pose',\r\n            self.listener_callback,\r\n            10)\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'Received Pose: x={msg.x:.2f}, y={msg.y:.2f}, theta={msg.theta:.2f}')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = CustomSubscriber()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(r.h2,{id:"quality-of-service-qos-implementation",children:"Quality of Service (QoS) Implementation"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy, DurabilityPolicy\r\n\r\nclass QoSPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('qos_publisher')\r\n        qos_profile = QoSProfile(\r\n            reliability=ReliabilityPolicy.RMW_QOS_POLICY_RELIABILITY_RELIABLE,\r\n            history=HistoryPolicy.RMW_QOS_POLICY_HISTORY_KEEP_LAST,\r\n            depth=5,\r\n            durability=DurabilityPolicy.RMW_QOS_POLICY_DURABILITY_TRANSIENT_LOCAL\r\n        )\r\n        self.publisher_ = self.create_publisher(String, 'qos_topic', qos_profile)\r\n        self.timer = self.create_timer(1.0, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'QoS Message {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: \"{msg.data}\" with QoS')\r\n        self.i += 1\r\n\r\nclass QoSSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('qos_subscriber')\r\n        qos_profile = QoSProfile(\r\n            reliability=ReliabilityPolicy.RMW_QOS_POLICY_RELIABILITY_RELIABLE,\r\n            history=HistoryPolicy.RMW_QOS_POLICY_HISTORY_KEEP_LAST,\r\n            depth=5,\r\n            durability=DurabilityPolicy.RMW_QOS_POLICY_DURABILITY_TRANSIENT_LOCAL\r\n        )\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'qos_topic',\r\n            self.listener_callback,\r\n            qos_profile) # Pass QoS profile here\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard (QoS): \"{msg.data}\"')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    publisher = QoSPublisher()\r\n    subscriber = QoSSubscriber()\r\n\r\n    executor = rclpy.executors.MultiThreadedExecutor()\r\n    executor.add_node(publisher)\r\n    executor.add_node(subscriber)\r\n\r\n    try:\r\n        executor.spin()\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        executor.shutdown()\r\n        publisher.destroy_node()\r\n        subscriber.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})})]})}function m(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);